'use strict';(function(g,e){const h=function(){var a=this.closest(".control-input");const d=a.getElementsByTagName("input");a=null!==a.querySelector("input:checked");for(let c=d.length-1;-1<c;--c)!0===a?d[c].removeAttribute("required"):d[c].setAttribute("required",!0)},k=function(a){a=e.selectWithParent("contact-animated-label",a);for(let d=a.length-1;-1<d;--d){let c=a[d].querySelectorAll("input,textarea");for(let a=c.length-1;-1<a;--a)"checkbox"===c[a].type?c[a].addEventListener("change",h,{passive:!0}):
c[a].addEventListener("blur",function(b){b=this.classList;""!==this.value?b.add("tb_filled"):b.remove("tb_filled")},{passive:!0})}},l=function(a){const d=function(b){const a=new FormData(b[0]);a.append("action","builder_contact_send");a.append("post_id",b.data("post-id"));a.append("element_id",b.data("element-id"));a.append("nonce",BuilderContact.nonce);0<b.find('[name="g-recaptcha-response"]').length&&a.append("contact-recaptcha",b.find('[name="g-recaptcha-response"]').val());g.ajax({url:b.prop("action"),
method:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:a,success:function(a){b.removeClass("sending");a.success?(b.find(".contact-message").html('<p class="ui light-green contact-success">'+a.data.msg+"</p>").fadeIn(),e.body.trigger("builder_contact_message_sent",[b,a.data.msg]),""!==a.data.redirect_url&&(window.location=a.data.redirect_url),b[0].reset()):(b.find(".contact-message").html('<p class="ui red contact-error">'+a.data.error+"</p>").fadeIn(),e.body.trigger("builder_contact_message_failed",
[b,a.data.error]));g("html").stop().animate({scrollTop:b.offset().top-100},500,"swing");"object"===typeof grecaptcha&&grecaptcha.reset()}})},c=function(a){e.is_builder_active||a.addEventListener("submit",function(b){b.preventDefault();const c=g(this);if(c.hasClass("sending"))return!1;c.addClass("sending").find(".contact-message").fadeOut();const e=a.getElementsByClassName("themify_captcha_field")[0];"undefined"!==typeof e&&"v3"===e.dataset.ver&&"undefined"!==typeof grecaptcha?grecaptcha.ready(function(){grecaptcha.execute(e.dataset.sitekey,
{action:"captcha"}).then(function(a){c.prepend('<input type="hidden" name="g-recaptcha-response" value="'+a+'">');d(c)})}):d(c)});a.addEventListener("reset",function(){g(this).find('.builder-contact-field .control-input input[type="checkbox"]').prop("required",!0)},{passive:!0})},f=a.getElementsByClassName("themify_captcha_field")[0];if(f&&"undefined"===typeof grecaptcha){const b=f.getAttribute("data-sitekey");if(b){let d="https://www.google.com/recaptcha/api.js";"v3"===f.getAttribute("data-ver")&&
(d+="?render="+b);e.LoadAsync(d,c.bind(null,a),!1,!0,function(){return"undefined"!==typeof grecaptcha})}}else c(a)};e.on("builder_load_module_partial",function(a,d,c){if(void 0!==a&&(!0!==c||a[0].classList.contains("module-contact"))){var f=a[0].getElementsByClassName("builder-contact");for(let a=f.length-1;-1<a;--a)e.requestIdleCallback(function(){k(f[a].parentNode)},100),e.requestIdleCallback(function(){l(f[a])},300)}})})(jQuery,Themify);
